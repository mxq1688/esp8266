# LED Control Project

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ NodeMCU LED æ§åˆ¶ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§LEDæ•ˆæœæ¨¡å¼ã€æŒ‰é’®æ§åˆ¶ã€ä¸²å£å‘½ä»¤å’ŒWiFiè¿æ¥ã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… **å¤šç§LEDæ§åˆ¶æ¨¡å¼**: æ‰‹åŠ¨ã€é—ªçƒã€å‘¼å¸ç¯ã€å½©è™¹æ•ˆæœ
- âœ… **æŒ‰é’®äº¤äº’æ§åˆ¶**: ç‰©ç†æŒ‰é’®åˆ‡æ¢æ¨¡å¼å’Œå¼€å…³LED
- âœ… **ä¸²å£å‘½ä»¤æ¥å£**: ä¸°å¯Œçš„å‘½ä»¤è¡Œæ§åˆ¶åŠŸèƒ½
- âœ… **PWMäº®åº¦æ§åˆ¶**: æ”¯æŒ0-100%äº®åº¦è°ƒèŠ‚
- âœ… **WiFiç½‘ç»œè¿æ¥**: è‡ªåŠ¨è¿æ¥é…ç½®çš„WiFiç½‘ç»œ
- âœ… **ç³»ç»Ÿç›‘æ§**: å†…å­˜ç›‘æ§ã€å¿ƒè·³æ£€æµ‹ã€çŠ¶æ€æŠ¥å‘Š

### LEDæ•ˆæœæ¨¡å¼
- **æ‰‹åŠ¨æ¨¡å¼**: ç›´æ¥å¼€å…³LEDæ§åˆ¶
- **é—ªçƒæ¨¡å¼**: 4ç§é€Ÿåº¦ï¼ˆæ…¢é—ª/æ­£å¸¸/å¿«é—ª/æ€¥é—ªï¼‰
- **å‘¼å¸ç¯æ¨¡å¼**: å¹³æ»‘çš„äº®åº¦æ¸å˜æ•ˆæœ
- **å½©è™¹æ¨¡å¼**: RGB LEDå¾ªç¯å˜è‰²æ•ˆæœ

## ğŸ“ é¡¹ç›®ç»“æ„

```
led_control/
â”œâ”€â”€ README.md          # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ init.lua          # ç³»ç»Ÿåˆå§‹åŒ–æ–‡ä»¶ (è‡ªåŠ¨æ‰§è¡Œ)
â”œâ”€â”€ main.lua          # ä¸»ç¨‹åºæ–‡ä»¶
â””â”€â”€ config.lua        # é…ç½®æ–‡ä»¶
```

## ğŸ”§ ç¡¬ä»¶è¿æ¥

### NodeMCU å¼•è„šæ˜ å°„

| åŠŸèƒ½ | NodeMCUå¼•è„š | GPIO | è¯´æ˜ |
|------|-------------|------|------|
| å†…ç½®LED | D2 | GPIO4 | æ¿è½½LED (ä½ç”µå¹³ç‚¹äº®) |
| çº¢è‰²LED | D1 | GPIO5 | å¤–æ¥çº¢è‰²LED |
| ç»¿è‰²LED | D6 | GPIO12 | å¤–æ¥ç»¿è‰²LED |
| è“è‰²LED | D7 | GPIO13 | å¤–æ¥è“è‰²LED |
| æŒ‰é’®1 | D3 | GPIO0 | æ¨¡å¼åˆ‡æ¢æŒ‰é’® |
| æŒ‰é’®2 | D4 | GPIO2 | å¼€å…³æ§åˆ¶æŒ‰é’® |
| èœ‚é¸£å™¨ | D8 | GPIO15 | å¯é€‰èœ‚é¸£å™¨ |

### ç”µè·¯è¿æ¥å›¾

```
NodeMCU          LED/æŒ‰é’®
   D2  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å†…ç½®LED (å·²è¿æ¥)
   D1  â”€â”€[220Î©]â”€â”€ çº¢è‰²LED â”€â”€ GND
   D6  â”€â”€[220Î©]â”€â”€ ç»¿è‰²LED â”€â”€ GND  
   D7  â”€â”€[220Î©]â”€â”€ è“è‰²LED â”€â”€ GND
   D3  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŒ‰é’®1 â”€â”€ GND
   D4  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŒ‰é’®2 â”€â”€ GND
  3V3  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŒ‰é’®ä¸Šæ‹‰ (å†…éƒ¨å·²å¯ç”¨)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½®é¡¹ç›®

ç¼–è¾‘ `config.lua` æ–‡ä»¶ï¼Œä¿®æ”¹WiFié…ç½®ï¼š

```lua
CONFIG.WIFI = {
    SSID = "ä½ çš„WiFiåç§°",        -- æ›¿æ¢ä¸ºå®é™…WiFiåç§°
    PASSWORD = "ä½ çš„WiFiå¯†ç ",     -- æ›¿æ¢ä¸ºå®é™…WiFiå¯†ç 
    AUTO_CONNECT = true           -- å¯ç”¨è‡ªåŠ¨è¿æ¥
}
```

### 2. ä¸Šä¼ æ–‡ä»¶

ä½¿ç”¨ ESPlorer æˆ–å…¶ä»–å·¥å…·ï¼ŒæŒ‰é¡ºåºä¸Šä¼ ä»¥ä¸‹æ–‡ä»¶åˆ° NodeMCUï¼š

1. `config.lua` - é…ç½®æ–‡ä»¶
2. `main.lua` - ä¸»ç¨‹åº
3. `init.lua` - åˆå§‹åŒ–æ–‡ä»¶ (æœ€åä¸Šä¼ )

### 3. é‡å¯è®¾å¤‡

é‡å¯ NodeMCUï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š
1. åŠ è½½é…ç½®æ–‡ä»¶
2. åˆå§‹åŒ–GPIOå’ŒLED
3. è¿æ¥WiFiç½‘ç»œ
4. å¯åŠ¨æ§åˆ¶ç³»ç»Ÿ

## ğŸ® ä½¿ç”¨æ–¹æ³•

### æŒ‰é’®æ§åˆ¶

**æŒ‰é’®1 (D3) - æ¨¡å¼åˆ‡æ¢:**
- æŒ‰ä¸€æ¬¡ï¼šæ‰‹åŠ¨æ¨¡å¼ â†’ é—ªçƒæ¨¡å¼
- å†æŒ‰ä¸€æ¬¡ï¼šé—ªçƒæ¨¡å¼ â†’ å‘¼å¸ç¯æ¨¡å¼  
- å†æŒ‰ä¸€æ¬¡ï¼šå‘¼å¸ç¯æ¨¡å¼ â†’ å½©è™¹æ¨¡å¼
- å†æŒ‰ä¸€æ¬¡ï¼šå½©è™¹æ¨¡å¼ â†’ æ‰‹åŠ¨æ¨¡å¼

**æŒ‰é’®2 (D4) - å¼€å…³æ§åˆ¶:**
- æ‰‹åŠ¨æ¨¡å¼ä¸‹ï¼šåˆ‡æ¢LEDå¼€å…³çŠ¶æ€
- å…¶ä»–æ¨¡å¼ä¸‹ï¼šåˆ‡æ¢åˆ°æ‰‹åŠ¨æ¨¡å¼å¹¶å¼€å…³LED

### ä¸²å£å‘½ä»¤

è¿æ¥ä¸²å£ (115200æ³¢ç‰¹ç‡)ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

#### åŸºæœ¬æ§åˆ¶
```bash
led_on          # å¼€å¯LED
led_off         # å…³é—­LED
led_toggle      # åˆ‡æ¢LEDçŠ¶æ€
```

#### æ•ˆæœæ¨¡å¼
```bash
led_blink [SLOW|NORMAL|FAST|RAPID]  # é—ªçƒæ¨¡å¼
led_breath                          # å‘¼å¸ç¯æ¨¡å¼
led_rainbow                         # å½©è™¹æ¨¡å¼
led_manual                          # æ‰‹åŠ¨æ¨¡å¼
```

#### äº®åº¦æ§åˆ¶
```bash
led_brightness 50    # è®¾ç½®äº®åº¦ä¸º50% (0-100)
```

#### ç³»ç»Ÿå‘½ä»¤
```bash
status          # æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€
memory          # æ˜¾ç¤ºå†…å­˜ä½¿ç”¨æƒ…å†µ
gpio_status     # æ˜¾ç¤ºGPIOçŠ¶æ€
restart         # é‡å¯è®¾å¤‡
help            # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

## âš™ï¸ é…ç½®è¯´æ˜

### GPIOé…ç½®
```lua
CONFIG.GPIO = {
    LED_BUILTIN = 4,    -- D2 - å†…ç½®LED
    LED_RED = 5,        -- D1 - çº¢è‰²LED
    LED_GREEN = 6,      -- D6 - ç»¿è‰²LED  
    LED_BLUE = 7,       -- D7 - è“è‰²LED
    BUTTON_1 = 0,       -- D3 - æ¨¡å¼åˆ‡æ¢æŒ‰é’®
    BUTTON_2 = 2,       -- D4 - å¼€å…³æŒ‰é’®
}
```

### LEDæ•ˆæœé…ç½®
```lua
CONFIG.LED = {
    BLINK_MODES = {
        SLOW = 1000,        -- æ…¢é—ª (1ç§’)
        NORMAL = 500,       -- æ­£å¸¸ (0.5ç§’)
        FAST = 200,         -- å¿«é—ª (0.2ç§’)
        RAPID = 100         -- æ€¥é—ª (0.1ç§’)
    },
    BREATH_SPEED = 50,      -- å‘¼å¸ç¯å˜åŒ–é€Ÿåº¦
    PWM_FREQ = 1000,        -- PWMé¢‘ç‡
}
```

### è°ƒè¯•é…ç½®
```lua
CONFIG.DEBUG = {
    PRINT_MEMORY = true,        -- æ‰“å°å†…å­˜ä½¿ç”¨
    PRINT_GPIO_STATUS = false,  -- æ‰“å°GPIOçŠ¶æ€
    LOG_COMMANDS = true         -- è®°å½•å‘½ä»¤æ‰§è¡Œ
}
```

## ğŸ” åŠŸèƒ½æ¼”ç¤º

### 1. é—ªçƒæ•ˆæœ
```lua
-- ä¸²å£å‘½ä»¤æ¼”ç¤º
led_blink FAST    -- å¿«é€Ÿé—ªçƒ
led_blink SLOW    -- æ…¢é€Ÿé—ªçƒ
```

### 2. å‘¼å¸ç¯æ•ˆæœ
```lua
-- å¯åŠ¨å‘¼å¸ç¯
led_breath
-- LEDä¼šå¹³æ»‘åœ°ä»æš—åˆ°äº®å†åˆ°æš—å¾ªç¯
```

### 3. å½©è™¹æ•ˆæœ
```lua
-- å¯åŠ¨å½©è™¹æ¨¡å¼ (éœ€è¦RGB LED)
led_rainbow
-- çº¢ç»¿è“LEDä¼šå¾ªç¯å˜è‰²
```

### 4. äº®åº¦æ§åˆ¶
```lua
-- è®¾ç½®ä¸åŒäº®åº¦çº§åˆ«
led_brightness 10     -- 10%äº®åº¦
led_brightness 50     -- 50%äº®åº¦  
led_brightness 100    -- 100%äº®åº¦
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. LEDä¸äº®**
```
æ£€æŸ¥é¡¹ç›®:
âœ“ ç¡®è®¤GPIOå¼•è„šè¿æ¥æ­£ç¡®
âœ“ æ£€æŸ¥LEDææ€§ (é•¿è„šæ¥æ­£æ)
âœ“ ç¡®è®¤é™æµç”µé˜»å€¼ (å»ºè®®220Î©)
âœ“ æµ‹è¯•å†…ç½®LEDæ˜¯å¦å·¥ä½œ
```

**2. æŒ‰é’®æ— å“åº”**
```
æ£€æŸ¥é¡¹ç›®:
âœ“ ç¡®è®¤æŒ‰é’®è¿æ¥åˆ°æ­£ç¡®å¼•è„š
âœ“ æ£€æŸ¥æŒ‰é’®æ˜¯å¦æ­£å¸¸å¯¼é€š
âœ“ ç¡®è®¤ä¸Šæ‹‰ç”µé˜»é…ç½® (ä»£ç ä¸­å·²å¯ç”¨å†…éƒ¨ä¸Šæ‹‰)
âœ“ æ£€æŸ¥é˜²æŠ–åŠ¨æ˜¯å¦ç”Ÿæ•ˆ
```

**3. WiFiè¿æ¥å¤±è´¥**
```
è§£å†³æ–¹æ¡ˆ:
âœ“ æ£€æŸ¥SSIDå’Œå¯†ç æ˜¯å¦æ­£ç¡®
âœ“ ç¡®è®¤WiFiä¿¡å·å¼ºåº¦
âœ“ æ£€æŸ¥è·¯ç”±å™¨æ˜¯å¦æ”¯æŒ2.4GHz
âœ“ å°è¯•é‡å¯è·¯ç”±å™¨
```

**4. ä¸²å£æ— è¾“å‡º**
```
æ£€æŸ¥é¡¹ç›®:
âœ“ ç¡®è®¤æ³¢ç‰¹ç‡è®¾ç½®ä¸º115200
âœ“ æ£€æŸ¥ä¸²å£é©±åŠ¨æ˜¯å¦å®‰è£…
âœ“ å°è¯•æŒ‰RSTæŒ‰é’®é‡å¯
âœ“ ç¡®è®¤USBçº¿æ”¯æŒæ•°æ®ä¼ è¾“
```

### è°ƒè¯•æŠ€å·§

**å¯ç”¨è¯¦ç»†è°ƒè¯•:**
```lua
-- åœ¨config.luaä¸­è®¾ç½®
CONFIG.DEBUG_MODE = true
CONFIG.DEBUG.PRINT_MEMORY = true
CONFIG.DEBUG.LOG_COMMANDS = true
```

**å†…å­˜ç›‘æ§:**
```bash
# ä¸²å£å‘½ä»¤
memory          # æŸ¥çœ‹å½“å‰å†…å­˜ä½¿ç”¨
status          # æŸ¥çœ‹å®Œæ•´ç³»ç»ŸçŠ¶æ€
```

**GPIOçŠ¶æ€æ£€æŸ¥:**
```bash
# ä¸²å£å‘½ä»¤
gpio_status     # æ˜¾ç¤ºæ‰€æœ‰GPIOå¼•è„šçŠ¶æ€
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰LEDæ•ˆæœ

å¯ä»¥åœ¨ `main.lua` ä¸­æ·»åŠ è‡ªå®šä¹‰LEDæ•ˆæœï¼š

```lua
-- è‡ªå®šä¹‰é—ªçƒæ¨¡å¼
function LED.custom_pattern()
    LED.stop_all_timers()
    current_mode = "custom"
    
    local pattern = {true, false, true, false, false}
    local step = 1
    
    local timer = tmr.create()
    timer:alarm(200, tmr.ALARM_AUTO, function()
        LED.set_all(pattern[step])
        step = step + 1
        if step > #pattern then step = 1 end
    end)
end
```

### Webæ§åˆ¶ç•Œé¢

å¯ä»¥æ‰©å±•æ·»åŠ Webæ§åˆ¶åŠŸèƒ½ï¼š

```lua
-- åœ¨main.luaä¸­æ·»åŠ WebæœåŠ¡å™¨
srv = net.createServer(net.TCP)
srv:listen(80, function(conn)
    conn:on("receive", function(client, request)
        -- å¤„ç†HTTPè¯·æ±‚
        local response = "HTTP/1.1 200 OK\r\n\r\n"
        response = response .. "<html><body>"
        response = response .. "<h1>LED Control</h1>"
        response = response .. "<button onclick='fetch(\"/led_on\")'>LED ON</button>"
        response = response .. "<button onclick='fetch(\"/led_off\")'>LED OFF</button>"
        response = response .. "</body></html>"
        client:send(response)
    end)
end)
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| å†…å­˜ä½¿ç”¨ | ~15KB |
| å¯åŠ¨æ—¶é—´ | ~3ç§’ |
| å‘½ä»¤å“åº”æ—¶é—´ | <100ms |
| PWMé¢‘ç‡ | 1KHz |
| æŒ‰é’®é˜²æŠ–æ—¶é—´ | 500ms |

## ğŸ”„ ç‰ˆæœ¬å†å²

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… åŸºç¡€LEDæ§åˆ¶åŠŸèƒ½
- âœ… å¤šç§æ•ˆæœæ¨¡å¼ (é—ªçƒ/å‘¼å¸/å½©è™¹)
- âœ… æŒ‰é’®äº¤äº’æ§åˆ¶
- âœ… ä¸²å£å‘½ä»¤æ¥å£
- âœ… WiFiè¿æ¥ç®¡ç†
- âœ… ç³»ç»Ÿç›‘æ§å’Œè°ƒè¯•

### è®¡åˆ’åŠŸèƒ½ (v1.1.0)
- ğŸ”„ Webæ§åˆ¶ç•Œé¢
- ğŸ”„ MQTTè¿œç¨‹æ§åˆ¶
- ğŸ”„ å®šæ—¶ä»»åŠ¡åŠŸèƒ½
- ğŸ”„ ä¼ æ„Ÿå™¨è”åŠ¨
- ğŸ”„ é…ç½®æ–‡ä»¶ä¿å­˜

## ğŸ“š å‚è€ƒèµ„æº

- [NodeMCU å®˜æ–¹æ–‡æ¡£](https://nodemcu.readthedocs.io/)
- [ESP8266 GPIOå‚è€ƒ](https://randomnerdtutorials.com/esp8266-pinout-reference-gpios/)
- [Lua è¯­è¨€æ•™ç¨‹](https://www.lua.org/manual/5.1/)
- [ESPlorer IDEä½¿ç”¨æŒ‡å—](https://esp8266.ru/esplorer/)

## ğŸ“„ è®¸å¯è¯

MIT License - å¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**äº«å—ä½ çš„LEDæ§åˆ¶é¡¹ç›®ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ•…éšœæ’é™¤éƒ¨åˆ†æˆ–æäº¤Issueã€‚
